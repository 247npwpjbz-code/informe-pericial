<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Informe Pericial</title>

    <!-- Estilo institucional azul/gris -->
    <style>
        body {
            margin: 0;
            font-family: Arial, Helvetica, sans-serif;
            background-color: #f4f6f9;
        }

        /* Sidebar institucional */
        #sidebar {
            width: 260px;
            background-color: #1f3c88; /* azul institucional */
            color: white;
            height: 100vh;
            position: fixed;
            left: 0;
            top: 0;
            padding-top: 20px;
            box-shadow: 3px 0 6px rgba(0,0,0,0.2);
        }

        #sidebar h2 {
            text-align: center;
            margin-bottom: 20px;
            font-weight: 300;
            letter-spacing: 1px;
        }

        .menu-btn {
            width: 90%;
            margin: 10px auto;
            padding: 12px;
            background-color: #2e4a9e;
            border: none;
            color: white;
            font-size: 15px;
            cursor: pointer;
            border-radius: 4px;
            text-align: left;
        }

        .menu-btn:hover {
            background-color: #3c5cc4;
        }

        /* Área principal */
        #main {
            margin-left: 280px;
            padding: 20px;
        }

        /* Contenedor de fotos y croquis */
        .media-section {
            margin-top: 20px;
            padding: 15px;
            background: white;
            border: 1px solid #d0d4db;
            border-radius: 6px;
        }

        footer {
            margin-top: 40px;
            padding: 15px;
            text-align: center;
            background-color: #1f3c88;
            color: white;
            border-radius: 6px;
        }
    </style>

    <!-- TinyMCE -->
    <script src="https://cdn.tiny.cloud/1/your-api-key/tinymce/6/tinymce.min.js" <script src="https://cdn.tiny.cloud/1/no-api-key/tinymce/6/tinymce.min.js" referrerpolicy="origin"></script>
="origin"></script>
</head>
<body>
<!-- Sidebar institucional -->
<div id="sidebar">
    <h2>Menú del Informe</h2>

    <button class="menu-btn" onclick="insertarTipoInforme()">Tipo de Informe</button>
    <button class="menu-btn" onclick="insertarTipoAccidente()">Tipo de Accidente</button>
    <button class="menu-btn" onclick="insertarVehiculoA()">Vehículo A</button>
    <button class="menu-btn" onclick="insertarVehiculoB()">Vehículo B</button>
    <button class="menu-btn" onclick="insertarCondicionesVia()">Condiciones de la vía</button>
    <button class="menu-btn" onclick="insertarEstadoPavimento()">Estado del pavimento</button>
    <button class="menu-btn" onclick="insertarVisibilidad()">Visibilidad</button>
    <button class="menu-btn" onclick="insertarSenalizacion()">Señalización que afecta al accidente</button>

    <button class="menu-btn" onclick="exportarPDF()">Exportar a PDF</button>
</div>

<!-- Área principal -->
<div id="main">

    <h1>Informe Pericial</h1>

    <!-- Botón de geolocalización -->
    <button id="btnGeo" onclick="obtenerGeolocalizacion()" 
        style="padding:10px 15px; background:#2e4a9e; color:white; border:none; border-radius:4px; cursor:pointer;">
        Obtener Geolocalización
    </button>

    <p id="geoResultado" style="margin-top:10px; font-weight:bold; color:#1f3c88;"></p>

    <!-- Editor TinyMCE -->
    <textarea id="editor"></textarea>

    <!-- Sección de fotos -->
    <div class="media-section">
        <h3>Fotografías</h3>
        <p>Espacio reservado para insertar fotografías del accidente.</p>
    </div>

    <!-- Sección de croquis -->
    <div class="media-section">
        <h3>Croquis</h3>
        <p>Espacio reservado para insertar croquis del accidente.</p>
    </div>

</div>
<<script>
/* ============================
   CONFIGURACIÓN DE TINYMCE
   ============================ */
tinymce.init({
    selector: '#editor',
    height: 500,
    menubar: true,
    plugins: 'lists table image code',
    toolbar: 'undo redo | bold italic underline | bullist numlist | table | image | code',
    branding: false,
    setup: function (editor) {
        window.editor = editor; // Hacemos accesible el editor globalmente
    }
});


/* ============================
   FUNCIONES PARA INSERTAR TEXTO LARGO
   (Cada botón añade contenido al final)
   ============================ */

function insertarTipoInforme() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaTipoInforme);
}

function insertarTipoAccidente() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaTipoAccidente);
}

function insertarVehiculoA() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaVehiculoA);
}

function insertarVehiculoB() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaVehiculoB);
}

function insertarCondicionesVia() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaCondicionesVia);
}

function insertarEstadoPavimento() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaEstadoPavimento);
}

function insertarVisibilidad() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaVisibilidad);
}

function insertarSenalizacion() {
    if (!window.editor) return alert("El editor aún no está listo.");
    window.editor.insertContent(plantillaSenalizacion);
}


/* ============================
   GEOLOCALIZACIÓN
   ============================ */

function obtenerGeolocalizacion() {
    if (!navigator.geolocation) {
        document.getElementById("geoResultado").innerText = "La geolocalización no está soportada en este navegador.";
        return;
    }

    navigator.geolocation.getCurrentPosition(
        function (pos) {
            const lat = pos.coords.latitude.toFixed(6);
            const lon = pos.coords.longitude.toFixed(6);
            document.getElementById("geoResultado").innerText =
                "Ubicación obtenida: Latitud " + lat + ", Longitud " + lon;

            if (window.editor) {
                window.editor.insertContent(
                    `<p><strong>Geolocalización del accidente:</strong> Latitud ${lat}, Longitud ${lon}</p>`
                );
            }
        },
        function (err) {
            document.getElementById("geoResultado").innerText = "Error al obtener la ubicación.";
        }
    );
}


/* ============================
   EXPORTAR A PDF
   ============================ */

function exportarPDF() {
    alert("Función de exportar a PDF pendiente de integrar con jsPDF o html2pdf.");
}
</script>

<!-- Pie de página institucional -->
<footer>
    Informe pericial elaborado conforme a los criterios técnicos y metodológicos aplicables.
    <br>
    © 2024 — Perito Judicial en Investigación y Reconstrucción de Accidentes de Tráfico
</footer>

<script>
/* ============================================================
   PLANTILLA 1 — TIPO DE INFORME
   ============================================================ */
const plantillaTipoInforme = `
<h2>Tipo de Informe</h2>
<p><strong>Descripción general:</strong></p>
<p>El presente documento constituye un informe pericial en materia de investigación y reconstrucción de accidentes de tráfico, elaborado conforme a los criterios técnicos, metodológicos y normativos aplicables.</p>

<p><strong>Objeto del informe:</strong></p>
<ul>
    <li>Determinación de la dinámica del accidente.</li>
    <li>Análisis de los factores concurrentes.</li>
    <li>Valoración técnica de daños y posiciones finales.</li>
</ul>

<p><strong>Observaciones:</strong></p>
<p>[Añadir observaciones específicas del caso]</p>
<hr>
`;


/* ============================================================
   PLANTILLA 2 — TIPO DE ACCIDENTE
   ============================================================ */
const plantillaTipoAccidente = `
<h2>Tipo de Accidente</h2>
<p><strong>Clasificación del accidente:</strong></p>
<p>[Colisión frontal / lateral / alcance / salida de vía / atropello / vuelco / otro]</p>

<p><strong>Descripción detallada:</strong></p>
<p>[Describir la secuencia previa, el momento del impacto y la fase posterior]</p>

<p><strong>Factores concurrentes:</strong></p>
<ul>
    <li>[Factor 1]</li>
    <li>[Factor 2]</li>
    <li>[Factor 3]</li>
</ul>

<p><strong>Observaciones:</strong></p>
<p>[Añadir detalles relevantes]</p>
<hr>
`;


/* ============================================================
   PLANTILLA 3 — VEHÍCULO A
   ============================================================ */
const plantillaVehiculoA = `
<h2>Vehículo A</h2>
<p><strong>Datos identificativos:</strong></p>
<ul>
    <li>Marca y modelo: [Indicar]</li>
    <li>Matrícula: [Indicar]</li>
    <li>Conductor: [Indicar]</li>
</ul>

<p><strong>Daños observados:</strong></p>
<p>[Describir daños en frontal, lateral, trasera, bajos, etc.]</p>

<p><strong>Posición final:</strong></p>
<p>[Describir ubicación final respecto a la vía]</p>

<p><strong>Observaciones:</strong></p>
<p>[Añadir información relevante]</p>
<hr>
`;


/* ============================================================
   PLANTILLA 4 — VEHÍCULO B
   ============================================================ */
const plantillaVehiculoB = `
<h2>Vehículo B</h2>
<p><strong>Datos identificativos:</strong></p>
<ul>
    <li>Marca y modelo: [Indicar]</li>
    <li>Matrícula: [Indicar]</li>
    <li>Conductor: [Indicar]</li>
</ul>

<p><strong>Daños observados:</strong></p>
<p>[Describir daños en frontal, lateral, trasera, bajos, etc.]</p>

<p><strong>Posición final:</strong></p>
<p>[Describir ubicación final respecto a la vía]</p>

<p><strong>Observaciones:</strong></p>
<p>[Añadir información relevante]</p>
<hr>
`;


/* ============================================================
   PLANTILLA 5 — CONDICIONES DE LA VÍA
   ============================================================ */
const plantillaCondicionesVia = `
<h2>Condiciones de la Vía</h2>
<p><strong>Características geométricas:</strong></p>
<ul>
    <li>Tipo de vía: [Urbana / Interurbana / Autovía / Carretera convencional]</li>
    <li>Número de carriles: [Indicar]</li>
    <li>Sentido de circulación: [Indicar]</li>
</ul>

<p><strong>Estado general:</strong></p>
<p>[Describir anchura, arcén, señalización horizontal, elementos de contención, etc.]</p>

<p><strong>Observaciones:</strong></p>
<p>[Añadir detalles relevantes]</p>
<hr>
`;


/* ============================================================
   PLANTILLA 6 — ESTADO DEL PAVIMENTO
   ============================================================ */
const plantillaEstadoPavimento = `
<h2>Estado del Pavimento</h2>
<p><strong>Condición superficial:</strong></p>
<ul>
    <li>Seco / Húmedo / Mojado / Deslizante</li>
    <li>Presencia de gravilla, arena, aceite u otros elementos</li>
</ul>

<p><strong>Descripción técnica:</strong></p>
<p>[Describir desgaste, grietas, baches, irregularidades, etc.]</p>

<p><strong>Observaciones:</strong></p>
<p>[Añadir información relevante]</p>
<hr>
`;


/* ============================================================
   PLANTILLA 7 — VISIBILIDAD
   ============================================================ */
const plantillaVisibilidad = `
<h2>Visibilidad</h2>
<p><strong>Condiciones ambientales:</strong></p>
<ul>
    <li>Día / Noche</li>
    <li>Climatología: [Despejado / Lluvia / Niebla / Viento / Otros]</li>
</ul>

<p><strong>Factores que afectan a la visibilidad:</strong></p>
<p>[Describir iluminación, sombras, obstáculos visuales, etc.]</p>

<p><strong>Observaciones:</strong></p>
<p>[Añadir detalles relevantes]</p>
<hr>
`;


/* ============================================================
   PLANTILLA 8 — SEÑALIZACIÓN QUE AFECTA AL ACCIDENTE
   ============================================================ */
const plantillaSenalizacion = `
<h2>Señalización que Afecta al Accidente</h2>
<p><strong>Señalización vertical:</strong></p>
<p>[Describir señales presentes, su visibilidad y estado]</p>

<p><strong>Señalización horizontal:</strong></p>
<p>[Describir marcas viales, su estado y legibilidad]</p>

<p><strong>Otros elementos:</strong></p>
<ul>
    <li>Semáforos</li>
    <li>Paneles informativos</li>
    <li>Balizamiento</li>
</ul>

<p><strong>Observaciones:</strong></p>
<p>[Añadir detalles relevantes]</p>
<hr>
`;
</script>

</body>
</html>
